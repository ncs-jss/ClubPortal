# Club Portal

## API Endpoints

All API paths must be prefixed with `/api/v1`

Students: 

| path | method | purpose |
|:-----|:-------|:--------|
| /student/    | POST   | Email registration. Requires **`email`**, **`password`**, and **`password_confirmation`** params. A verification email will be sent to the email address provided. Accepted params can be customized using the [`devise_parameter_sanitizer`](https://github.com/plataformatec/devise#strong-parameters) system. |
| /student | DELETE | Account deletion. This route will destroy users identified by their **`uid`**, **`access_token`** and **`client`** headers. |
| /student | PUT | Account updates. This route will update an existing user's account settings. The default accepted params are **`password`** and **`password_confirmation`**, but this can be customized using the [`devise_parameter_sanitizer`](https://github.com/plataformatec/devise#strong-parameters) system. If **`config.check_current_password_before_update`** is set to `:attributes` the **`current_password`** param is checked before any update, if it is set to `:password` the **`current_password`** param is checked only if the request updates user password. |
| /student/sign_in | POST | Email authentication. Requires **`email`** and **`password`** as params. This route will return a JSON representation of the `User` model on successful login along with the `access-token` and `client` in the header of the response. |
| /student/sign_out | DELETE | Use this route to end the user's current session. This route will invalidate the user's authentication token. You must pass in **`uid`**, **`client`**, and **`access-token`** in the request headers. |
| /student/validate_token | GET | Use this route to validate tokens on return visits to the client. Requires **`uid`**, **`client`**, and **`access-token`** as params. These values should correspond to the columns in your `User` table of the same names. |
| /student/password | POST | Use this route to send a password reset confirmation email to users that registered by email. Accepts **`email`** and **`redirect_url`** as params. The user matching the `email` param will be sent instructions on how to reset their password. `redirect_url` is the url to which the user will be redirected after visiting the link contained in the email. |
| /student/password | PUT | Use this route to change users' passwords. Requires **`password`** and **`password_confirmation`** as params. This route is only valid for users that registered by email (OAuth2 users will receive an error). It also checks **`current_password`** if **`config.check_current_password_before_update`** is not set `false` (disabled by default). |
| /student/password/edit | GET | Verify user by password reset token. This route is the destination URL for password reset confirmation. This route must contain **`reset_password_token`** and **`redirect_url`** params. These values will be set automatically by the confirmation email that is generated by the password reset request. |

To use the endpoint with nibblites replace `/student` with `/user` in each path. 

Source: https://github.com/lynndylanhurley/devise_token_auth/blob/master/README.md#usage-tldr


### Design Events:

All API paths must be prefixed with `/api/v1`

| path | method | purpose |
|:-----|:-------|:--------|
| /design_events    | POST   | Create a new event. |
| /design_events/:id    | PUT  | Edit an exsisting event with id: `id`. | 

Example params:

```
{
	"design_event":
	{
		"title":"Designathon",
		"description": "...........................",
		"start_time" : "2017-01-09T23:03:18.806Z",
		"end_time": "2017-01-15T23:03:18.806Z"
	}
}
```




| path | method | purpose |
|:-----|:-------|:--------|
| /design_events    | GET  | Fetch all current, past or future events |  
| /design_events/:id   | GET  | Fetch event from `id` | 
| /design_events/:id/submit    | POST   | Submit the picture for the event with id: `id`by the current logged in student. params: `comment` , `solution_image` | 




